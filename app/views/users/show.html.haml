%section#content_body
  %div.page_title_left
    =_("Meine Inhalte")
  .clear
  #results
    Loading...

%section#content_body2      
  %div.page_title_left
    =_("Mir anvertraute Inhalte")
  .clear
  #results_others.not_public
    Loading...

%section#content_body2      
  %div.page_title_left
    =_("Ã–ffentliche Inhalte")
  .clear
  #results_others.public
    Loading...

= render :partial => "media_resources/templates"

:javascript
  // TODO dry => batch_actions.js
  $(document).ready(function () {
    function display_entries(entries, container){
      $(container).html($.tmpl("tmpl/media_resource/thumb_box", entries, {with_checkbox: false}));
    }
    
    var per_page = 10;
    
    var url_1 = "#{media_resources_path(:user_id => current_user)}"; 
    $.ajax({
      url: url_1,
      data: {per_page: per_page},
      dataType: 'json',
      complete: function(response){
        var data = JSON.parse(response.responseText);
        var container_str = "#results";
        if(data.media_resources.length){
          display_entries(data.media_resources, container_str);
          if(data.pagination.total > per_page){
            $(container_str).append("<div class='buttons'><a href=\""+url_1+"\">Alle meine Inhalte</a></div>");
          }
        }else{
          $(container_str).html("Keine Medien vorhanden");
        }
      }
    });

    var url_2 = "#{media_resources_path(not_by_current_user: true, public: false)}"; 
    $.ajax({
      url: url_2,
      data: {per_page: per_page},
      dataType: 'json',
      complete: function(response){
        var data = JSON.parse(response.responseText);
        var container_str = "#results_others.not_public";  
        if(data.media_resources.length){
          display_entries(data.media_resources, container_str);
          if(data.pagination.total > per_page){
            $(container_str).append("<div class='buttons'><a href=\""+url_2+"\">Alle mir anvertrauten Inhalte</a></div>");
          }
        }else{
          $(container_str).html("Keine Medien vorhanden");
        }
      }
    });

    var url_3 = "#{media_resources_path(not_by_current_user: true, public: true)}"; 
    $.ajax({
      url: url_3,
      data: {per_page: per_page},
      dataType: 'json',
      complete: function(response){
        var data = JSON.parse(response.responseText);
        var container_str = "#results_others.public";  
        if(data.media_resources.length){
          display_entries(data.media_resources, container_str);
          if(data.pagination.total > per_page){
            $(container_str).append("<div class='buttons'><a href=\""+url_3+"\">Alle Ã¶ffentlichen Inhalte</a></div>");
          }
        }else{
          $(container_str).html("Keine Medien vorhanden");
        }
      }
    });

  });


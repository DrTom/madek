# OPTIMIZE do we really want to json parse ??
h = JSON.parse(render(:partial => "media_resources/show.json.rjson", :locals => {:media_resource => media_entry, :with => with}))

if (with || nil)
  [:user_id, :created_at, :updated_at, :media_file_id].each do |k|
    h[k] = media_entry.send(k) if with[k]
  end

  if with[:can_maybe_browse]
    h[:can_maybe_browse] = media_entry.meta_data.for_meta_terms.exists?
  end
end

h

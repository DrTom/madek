%section#content_body
  .page_title_left
    =_("Suchergebnisse")
    #term
      für &quot;
      = @search_term
      &quot;
  .clear
  - if [@media_entries, @media_sets, @projects].all? {|x| x.nil? }
    = "Ihre Suche nach “#{@search_term}” hat keine Resultate ergeben."
  - else 
    #detail_specification.tabs
      %ul
        %li
          = link_to "Medieneinträge (#{@paginated_media_entry_ids.total_entries})", "#media_entry_tab"
        %li
          = link_to "Sets (#{@paginated_media_set_ids.total_entries})", "#set_tab" 
        %li
          = link_to "Projekte (#{@paginated_project_ids.total_entries})", "#project_tab"
      #media_entry_tab.clearfix 
        - if @media_entries.length > 1
          .filter_area
            = render :partial => 'filter_form', :locals => {:filter => @media_entry_filter, :media => @media_entries }
        %div{:id => "media_entry_results", :class => @media_entries.length > 1 ? "result_area" : "" }
          = render :partial => 'results', :locals => { :type => "media_entry", :json => @media_entries_json }
      #set_tab.clearfix   
        - if @media_sets.length > 1
          .filter_area
            = render :partial => 'filter_form', :locals => {:filter => @media_set_filter, :media => @media_sets }
        %div{:id => "set_results", :class => @media_sets.length > 1 ? "result_area" : "" }
          = render :partial => 'results', :locals => { :type => "set", :json => @media_sets_json }
      #project_tab.clearfix  
        - if @projects.length > 1
          .filter_area
            = render :partial => 'filter_form', :locals => {:filter => @project_filter, :media => @projects }
        %div{:id => "project_results", :class => @projects.length > 1 ? "result_area" : "" }
          = render :partial => 'results', :locals => { :type => "project",  :json => @projects_json }


= theme_javascript_include_tag "batch_actions"        
:javascript

  $(document).ready(function () { 

    var $tabs = $('#detail_specification').tabs();
    var active_bookmark = '#{@active_bookmark}';
    if (active_bookmark != '') $tabs.tabs('select', active_bookmark);
    
    $('.filter_box h3.filter_category a.filter_category_link').click(function() {
      var icon = $(this).siblings('span.ui-icon');
      var to_toggle = $(this).parent().next('.filter_content');

    	to_toggle.toggle();
    	if (to_toggle.is(":visible")) {
    	  icon.removeClass('ui-icon-triangle-1-e').addClass('ui-icon-triangle-1-s');
    	} else {
    	  icon.removeClass('ui-icon-triangle-1-s').addClass('ui-icon-triangle-1-e');
    	};
    	return false;
    });
  
  });
.task_bar.clearfix
  %ul
    %li
      %h4 Ausgewählte Medieneinträge bearbeiten:
    %li#number_selected
      Keine Medieneinträge ausgewählt
    %li#select_deselect_all
      = check_box_tag "alle", :id => "select_all_toggle"
      Alle auswählen
    .clear
    %li#batch-edit.action_btn
      = button_to _("Metadaten editieren"), edit_multiple_media_entries_path, :method => :post
    %li#batch-permissions.action_btn
      = button_to _("Zugriffsberechtigungen editieren"), edit_multiple_permissions_media_entries_path, :method => :post
    - if @can_edit_set
      %li#batch-remove.action_btn
        = button_to _("Aus Set entfernen"), remove_multiple_media_set_media_entries_path(@media_set), :method => :delete
    %li#batch-add-to-set.action_btn
      = form_tag add_member_media_set_url(@media_set || 1) do
        = select_tag "media_set_id", options_for_select([["Set auswählen…", ""]] + @editable_sets.collect {|set| [set.meta_data.get_value_for("title"), set.id]})
        = submit_tag "Hinzufügen"
    .clear
  #selected_items.clearfix

#results
  %h3#loading
    = image_tag "loadingAnimation.gif"

////////////////////////////////////////////////////////////////////////////////

%script{:type => "text/x-jquery-tmpl", :id => "pagination"}
  .pagination
    ${total_entries} Resultate
    %br
    Seite ${current_page} von ${total_pages}
  .clear

%script{:type => "text/x-jquery-tmpl", :id => "thumbnail_mini"}
  %div{:class => "thumb_mini {{if is_editable}}edit{{/if}} {{if is_manageable}}manage{{/if}}", :rel => "${id}"}
    = theme_image_tag("icons/button_remove_action.png", :class => "thumb_remove")
    %img{:src => "${thumb_base64}"}

%script{:type => "text/x-jquery-tmpl", :id => "media_entry_index"}
  %div.item_box{:id => "thumb_${id}"}
    %div.item_permission
      {{if is_public}}
      = theme_image_tag("icons/button_status_private.png")
      {{else is_private}}
      = theme_image_tag("icons/icon_button_perm.png")
      {{/if}}
    %div.thumb_box
      %a{:href => "/media_entries/${id}"}
        %img{:src => "${thumb_base64}"}
    %p.item_title
      ${title.substring(0,29)}
    %p.item_author
      ${author.substring(0,18)}
    .actions
      .action_left
        %input{:type => "checkbox", :value => "${id}", :title => "Auswählen", :class => "editable"}
        %span.favorite_link{:id => "fav_${id}", :title => "Favorit"}
          %a{:href => "/media_entries/${id}/toggle_favorites", :title => "Editieren", :"data-remote" => true, :"data-type" => "html", :"data-method" => :post}
            {{if is_favorite}}
            = theme_image_tag("icons/button_favorit_on.png")
            {{else}}
            = theme_image_tag("icons/button_favorit_off.png")
            {{/if}}
      .action_right
        /url = resource.is_a?(MediaEntry) ? edit_media_entry_path(resource) : edit_media_set_path(resource)
        {{if is_editable}}
        %a{:href => "/media_entries/${id}", :title => "Editieren"}
          = theme_image_tag("icons/button_edit_active.png")
        {{else}}
        = theme_image_tag("icons/button_edit_inactive.png")
        {{/if}}
        {{if is_manageable}}
        /confirm = resource.is_a?(MediaEntry) ? "Sind Sie sicher?" : "Sind Sie sicher? Das Set wird gelöscht."
        %a{:href => "/media_entries/${id}", :title => "Löschen", :"data-method" => :delete, :"data-confirm" => "Sind Sie sicher?"}
          = theme_image_tag("icons/button_delete_active.png")
        {{else}}
        = theme_image_tag("icons/button_delete_inactive.png")
        {{/if}}
